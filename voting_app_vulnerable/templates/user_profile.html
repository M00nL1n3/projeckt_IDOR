<!DOCTYPE html>
<html>
<head>
    <title>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h1>
        <a href="/">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
        {% if is_admin %}<a href="{{ url_for('users_list') }}">‚Üê –ö —Å–ø–∏—Å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</a>{% endif %}

        <div class="profile-info">
            <h2>{{ user.username }}</h2>
            <p>Email: {{ user.email }}</p>
            {% if user.is_admin %}
            <div class="admin-full-access">
                <p class="admin-badge">üëë –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†</p>
                <div class="admin-links">
                    <a href="{{ url_for('users_list') }}">üìã –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
                    <a href="{{ url_for('create_candidate') }}">‚ûï –°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞</a>
                    <a href="{{ url_for('register') }}">üë• –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</a>
                </div>
            </div>
            {% endif %}
            
            {% if user.voted_for %}
                {% set candidate = Candidate.query.get(user.voted_for) %}
                <p>–ü—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª –∑–∞: <a href="{{ url_for('candidate_profile', candidate_id=user.voted_for) }}">{{ candidate.name }}</a></p>
                <p>–í—Ä–µ–º—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è: {{ user.vote_timestamp }}</p>
            {% else %}
                <p>–ï—â–µ –Ω–µ –≥–æ–ª–æ—Å–æ–≤–∞–ª</p>
            {% endif %}
        </div>

        <!-- –î–µ–π—Å—Ç–≤–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—É –∏–ª–∏ —Å–∞–º–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é -->
        {% if user.is_admin or current_user_id == user.id %}
        <div class="admin-actions">
            <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–º:</h3>
            
            {% if user.voted_for %}
            <form action="{{ url_for('cancel_vote', user_id=user.id) }}" method="POST">
                <button type="submit">–û—Ç–º–µ–Ω–∏—Ç—å –≥–æ–ª–æ—Å —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
            </form>
            {% endif %}
            
            <!-- –ö–Ω–æ–ø–∫–∏ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≥–æ–ª–æ—Å–∞ —Ä–∞–∑–Ω—ã–º –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º -->
            {% for candidate in Candidate.query.all() %}
            <form action="{{ url_for('transfer_vote', user_id=user.id, candidate_id=candidate.id) }}" method="POST">
                <button type="submit" class="{% if candidate.name == '–û–≥—É—Ä–µ—Ü –æ—Ç –ö–æ–ø–∞—Ç—ã—á–∞' %}cucumber-btn{% endif %}">
                    –ü–µ—Ä–µ–¥–∞—Ç—å –≥–æ–ª–æ—Å —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {{ candidate.name }}
                </button>
            </form>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</body>
</html>
